<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>SDGVM Update Project: Running</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="styleSheet.css" rel="stylesheet" type="text/css" />
<link href="styleSheetExtra.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" width="100%">
  <tbody>
    <tr style="height: 100px;">
      <td id="projectLC3M" width="30%"><a href="http://lc3m.org"><img alt="Logo" src="images/LC3M2.png"/></a>
      </td>
      <td style="width=40%">
        <table width="100%">
          <tr> <td align="center"><div class="projectname"><span>S</span>heffield <span>D</span>ynamic <span>G</span>lobal</div></td></tr>
          <tr> <td align="center"><div class="projectname"><span>V</span>egetation <span>M</span>odel</div></td></tr>
        </table>
      </td>
      <td id="projectSU" width="30%"><a href="http://www.sheffield.ac.uk"><img alt="Logo" src="images/Sheffield_University2.png"/></a>
      </td>
     </tr>
   </tbody>
  </table>
</div> <!-- Title area div
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('page2.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Running </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1>Running The SDGVM </h1>
<p>The input data for the SDGVM is fully described by an ASCII file, whose name is supplied to the SDGVM as the first command line argument. If no arguments are supplied to the SDGVM, the program terminates after outputting the version number. All input data is given in the input file, or, in files specified by the input file. Within the input file all fields are space delimited, multiple spaces are allowed, initial spaces are ignored if present. In the following, the input file records are described, sequentially, with examples. Line numbers are given in brackets.</p>
<p>Certain information required by the input file can be input via command line arguments. These are specified in the input file by the appearance of ‘ARGUMENT’. The arguments are passed to the input file in the order that they appear on the command line. This facility is particularly useful when setting up a parallel SDGVM run.</p>
<p>(1) DOS|UNIX: The platform on which the model is to be compiled/run. This information is required due to differences in handling record lengths when using direct access.</p>
<p>NOTE A common problem which can occur on a DOS platform is when transferred ASCII files contain formatting. This can result in a file whose end of line character requires 1 byte, the SDGVM is expecting DOS ASCII file end of line characters to take up 2 bytes. Simply opening and saving the file normally resolves this problem.</p>
<p>(2) The directory path of the climate database. As with all pathnames, this can be a full path from root or a partial path from the current directory. Currently, the database must contain monthly values for temperature, precipitation, humidity and percentage cloud cover; unless stated otherwise the units of these variables are in 0.1 oC, mm, .1 % and 0.1 % respectively. </p><pre class="fragment">Full directory path:        c:\data\daily

Partial directory path:     ..\..\data\daily
</pre><p>The directory must contain a file named ‘readme.dat’ which describes the type of climate in the directory. The first line of the file is either DAILY MONTHLY or SITE.</p>
<p>NOTE The data read to be read in from ‘readme.dat’ files occurs on alternate lines leaving root for comments; the comment lines must be present even if empty.</p>
<p>DAILY: A gridded daily climate of 30 day months. The extent and special/temporal resolution are given in the ‘readme.dat’ file.</p>
<p>eg</p>
<ol>
<li>
DAILY  </li>
<li>
Upper left lat and long (centre of pixel)  </li>
<li>
72.0 –11.0  </li>
<li>
lat and lon resolution  </li>
<li>
0.16666667 0.16666667  </li>
<li>
number of pixels (north to south, east to west)  </li>
<li>
228 258  </li>
<li>
initial and final years of the dataset  </li>
<li>
1901 2000  </li>
</ol>
<p>The directory must also contain a file named ‘maskmap.dat’. This file maps the spatial position to the position of the site in the data file, using this technique we remove the need to record none land sites in the data files.</p>
<p>MONTHLY: A gridded monthly climate. The geographical and temporal extent and spatial resolution are given in the ‘readme.dat’ file.</p>
<p>eg</p>
<ol>
<li>
MONTHLY  </li>
<li>
Upper left lat and long (centre of pixel)  </li>
<li>
72.0 –11.0  </li>
<li>
lat and lon resolution  </li>
<li>
0.16666667 0.16666667  </li>
<li>
number of pixels (north to south, east to west)  </li>
<li>
228 258  </li>
<li>
initial and final years of the dataset  </li>
<li>
1901 2000  </li>
</ol>
<p>The directory must also contain a file named ‘maskmap.dat’. This file maps the spatial position to the position of the site in the data file, using this technique we remove the need to record none land sites in the data files.</p>
<p>SITE (daily): An individual climate site with daily climate. The location and temporal resolution are given in the ‘readme.dat’ file. The data must contain values for every day of every month (including leap year adjustments).</p>
<ol>
<li>
SITED  </li>
<li>
lat and long  </li>
<li>
52.083 –10.417  </li>
<li>
initial and final years of the dataset  </li>
<li>
1901 1903  </li>
</ol>
<p>In this case, all data is kept in one file named ‘site.dat’. Each record contains year, month, day, temperature (C) precipitation (mm) humidity (%). List directed format is used, so all that is required is that the data be space delimited.</p>
<p>SITE (monthly): An individual climate site with monthly climate. The location and temporal resolution are given in the ‘readme.dat’ file.</p>
<ol>
<li>
SITEM  </li>
<li>
lat and long  </li>
<li>
52.083 –10.417  </li>
<li>
initial and final years of the dataset  </li>
<li>
1901 1903  </li>
</ol>
<p>In this case, all data is kept in one file prc.dat tmp.dat and hum.dat. Each record contains year and twelve monthly values. List directed format is used, so all that is required is that the data be space delimited.</p>
<p>(3) The directory path of climatic statistics database. These data are used together with monthly climate data to produce daily climate via a weather generator. The extent and special/temporal resolution are given in the ‘readme.dat’ file if appropriate. The directory may contain one set of monthly statistics, which are to be used at all sites or a grid of statistics covering a rectangular area. In the former case the first record of the file should read UNIFORM; in the latter case it should read LONLAT.</p>
<p>eg </p><ol>
<li>
UNIFORM  </li>
</ol>
<p>or </p><ol>
<li>
LONLAT  </li>
<li>
Upper left lat and long (centre of pixel)  </li>
<li>
72.0 –11.0  </li>
<li>
lat and lon resolution  </li>
<li>
0.16666667 0.16666667  </li>
<li>
number of pixels (north to south, east to west)  </li>
<li>
228 258  </li>
</ol>
<p>The monthly statistics are given in three files named ‘stdtmp.dat’, ‘stdhum.dat’ and ‘raindays.dat’, the units are oC, % and days/month respectively. In the case of UNIFORM data list directed format is used, so all that is required is that the data be space delimited. In the case of LATLON data then the format of each record is (12f6.2) thus one record per site.</p>
<p>(4) The directory path of the soil characteristics database. The data resides in a file named ‘data.dat’ which contains values for % sand % silt, bulk density (g/m2) and depth (cm). Negative values are used to represent no data. The geographical extent and spatial resolution are given in ‘readme.dat’.</p>
<p>eg </p><ol>
<li>
Upper left lat and long (top left corner of pixel)  </li>
<li>
90.0 –180.0  </li>
<li>
latitude and longitude resolution  </li>
<li>
1.0 1.0  </li>
<li>
number of pixels (north to south east to west)  </li>
<li>
180 360   </li>
</ol>
<p>The ‘data.dat’ file is in the following format, latitude, longitude, % sand, % silt, bulk density (g/m2) and depth ‘(f7.3,f9.3,4f12.3)’.</p>
<p>NOTE Any of these values are over written when positive default values exist in the soil input line of the input file.</p>
<p>(5) The directory path of the land use database. The directory must contain a file named ‘readme.dat’ which contains the geographical and temporal, extent and resolutions. The first line of this file must contain ‘CONTINUOUS’.</p>
<p>eg </p><ol>
<li>
CONTINUOUS  </li>
<li>
Upper left lat and long (centre of pixel)  </li>
<li>
90.0 –180.0  </li>
<li>
latitude and longitude resolution  </li>
<li>
0.5 0.5  </li>
<li>
number of pixels (north to south east to west)  </li>
<li>
360 720  </li>
<li>
years of landuse  </li>
<li>
1700 1750 1800 1850 1900 1950 1990  </li>
<li>
classes  </li>
<li>
1 2 3 4 5 6 10 22 44  </li>
</ol>
<p>The land use data are stored as continuous percentages of cover. There is one file per class per year. The files are named </p><pre class="fragment">cont_lu-&lt;class&gt;-&lt;year&gt;.dat
</pre><p>where class and year can be are the fields specified in lines 9 and 11.</p>
<p>The percentages are stored as (I3), one value per record.</p>
<p>NOTE The land use described in this database can be over written by the land use section of the input file.</p>
<p>(6) The filename of the CO2 data. This is optionally separated from the climate data to allow for ease of running different CO2 scenarios. The CO2 file is an ASCII file containing values of yearly averaged global CO2 partial pressures given in Pa. </p><pre class="fragment">c:\data\co2\co21.dat
</pre><p>Each record in the file should contain consecutive years and co2 values, one year per record.</p>
<p>eg </p><ul>
<li>
1861 28.82  </li>
<li>
1862 28.83  </li>
<li>
1863 28.84  </li>
<li>
1864 28.85  </li>
<li>
. . .  </li>
<li>
. . .  </li>
<li>
. . .  </li>
<li>
2000 37.77  </li>
</ul>
<p>(7) A constant CO2 value. If the value is positive, then it is used for the first phase of a run whether it is a spin-up or a run proper. If the value is negative then values are taken from the CO2 file. Typically a positive value will be used for a spin-up run and a negative value for the run proper, if spin up and run proper are being done in one run then this is done automatically. For a pre-industrial spin-up this value would typically be set to 28.82.</p>
<p>(8) The file name of the land sea mask. The default mask provided with the SDGVM is derived from the GLOBE DEM. It is an array of 0’s and 1’s at a resolution of 30 arc-seconds. To reduce the size of the file, the 0’s and 1’s are written as 7 figure binary digits, which are converted to ASCII characters, these DIY binaries are used as an alternative to FORTRAN binary’s, which are not compatible between platforms and compilers.</p>
<p>In UNIX the number of columns is (360*120)/7 + 1 = 6173, in DOS (360*120)/7 + 2 = 6174, the number of rows in either case is (180*120) = 21600.</p>
<p>Therefore the size of the land sea mask is 6173*21600=133,336,800 b in UNIX and 6174*21600=133,358,400 b in DOS.</p>
<p>(9) Skipped.</p>
<p>(10) The directory path containing initialisation files. These are used to initialise the state at the beginning of a run. Generally this will be the path to a directory where the output from a spin-up run has been placed. There are two methods to define this. </p><pre class="fragment">a) A string in the input file.

b) A command line argument. To invoke this option the entry in 
</pre><p> the input file must read ‘ARGUMENT’.</p>
<p>(11) The directory path where all output files from the run will be placed. There are two methods to define this. </p><pre class="fragment">a) A string in the input file.

b) A command line argument. To invoke this option the entry in 
</pre><p> the input file must read ‘ARGUMENT’.</p>
<p>(12) Skipped.</p>
<p>(13) Three or four logical values (0 = no, 1 = yes).</p>
<p>(10) Initialise the system state in a simplistic manner within the SDGVM. Typically, ‘yes’ for spin-up, ‘no’ for the run proper. If ‘no’ then the state is initialised using files in the directory named by (4).</p>
<p>(11) Output the system state at the end of the run. Typically, ‘yes’ for spin-up and ‘no’ for the run proper. If ‘yes’ then as with all output files the files containing the state of the system will be placed in the directory specified in (5). NOTE The option not to output the system state is included to save hard disk space: system state files are much larger than standard output files.</p>
<p>(12) Use manipulated carbon dynamics. This is a technique employed to enable the carbon pools to reach the equilibrium cycle faster than they would naturally. Typically, enabled for the spin-up run, disabled for the run proper. This is can give rise to problems at certain sites and should be used tentatively.</p>
<p>(13) Seed for the random number generator used by the weather generator to convert from monthly to daily where necessary, denote by rseed. If no value is given a default value of 1 is used. There are 3 modes of randomisation: </p><ul>
<li>
i) seed&lt;0, ii) seed=0 and (iii) seed&gt;0.  </li>
<li>
i) rseed&lt;0. The seed is initialised to –rseed at the beginning of the run.  </li>
<li>
ii) rseed=0. The seed is initialised by the system clock at the beginning of the run.  </li>
<li>
iii) rseed&gt;0. The seed is initialised to rseed for each site.  </li>
</ul>
<p>eg Spin-up: 1 1 0</p>
<p>Run proper: 0 0 0</p>
<p>(14) Three methods to describe a run.</p>
<p>1) spin-up run: four fields: number of years of the spin-up, the initial year of the climate to be used, the length of the spin-up climate cycle, switch for randomisation of each climate cycle (0=no randomisation, 1=randomise). A cycle of at least 20 years is desirable, short spin-up cycles are more likely to contain climate untypical of the larger period for which it is being used to representative. The length of the spin-up should be no less than 500 years.</p>
<p>eg 500 1901 20 1</p>
<p>For a five hundred year spin-up using a repeated randomised climate of 1901-1920. A separate randomisation is used for each cycle.</p>
<p>2) Run proper: two fields: initial year of the run, final year of the run.</p>
<p>eg </p><pre class="fragment">1901 2000
</pre><p>3) spin-up + run proper: six fields: 1) + 2)</p>
<p>eg </p><pre class="fragment">500 1901 20 1 1901 2000
</pre><p>For any of the three methods above, an additional field can be supplied to state the number of years of output required before the final year of the run. If this is not supplied then default values are used as follows, 1) the last climate cycle plus one year, 2) all of the years from the run proper, 3) all of the years from the run proper.</p>
<p>(15) Description of required monthly and or daily outputs. The first field must contain ‘PIXEL’, the second field must contain one of {MONTHLY, DAILY, ALL}. </p><pre class="fragment">MONTHLY:Monthly outputs.
DAILY:  Daily outputs.
ALL:    Monthly and daily outputs.
</pre><p>The next field specifies the number of years of output, prior to the final year. Followed by the actual outputs required. These can be any of the following, and can be given in any order.</p>
<ul>
<li>
lai: Leaf area index  </li>
<li>
rof: Run off (mm)  </li>
<li>
evt: Evapotranspiration (mm)  </li>
<li>
trn: Transpiration (mm)  </li>
<li>
npp: Net Primary Productivity (g C m-2 yr-1)  </li>
<li>
gpp: Gross Primary Productivity (g C m-2 yr-1)  </li>
<li>
srp: Soil respiration (g C m-2 yr-1)  </li>
<li>
nep: Net Ecosystem Productivity (g C m-2 yr-1)  </li>
<li>
tmp: Temperature (oC)  </li>
<li>
prc: Precipitaiton (mm)  </li>
<li>
hum: Humidity (%)  </li>
<li>
nps: NPP storage (g C m-2)  </li>
<li>
swf: Fraction of soil moisture between wilting point and field capacity (0-1)  </li>
<li>
pet: Potential evapotranspiration (mm m-2).  </li>
<li>
int: Interception (mm m-2)  </li>
<li>
bse: Bare soil evaporation (mm m-2).  </li>
<li>
ssm: Surface soil moisture (surface currently set at 5 cm) (mm m-2)  </li>
<li>
swc: Soil water content (mm m-2).  </li>
<li>
rsp: Plant respiration (g C m-2).  </li>
<li>
qdr: Direct radiation (MJ m-2 day-1 or mol m-2 day-1) ??  </li>
<li>
qdf: Diffuse radiation (MJ m-2 day-1 or mol m-2 day-1) ??  </li>
<li>
lfn: Leaf nitrogen (g m-2)  </li>
<li>
lfl: Leaf litter (g m-2)  </li>
<li>
cld: Percentage of cloud cover (%).  </li>
<li>
fpr: Fraction of photosynthetically active radiation (mol)  </li>
</ul>
<p>eg PIXEL DAILY 1990 2000 lai nep trn</p>
<p>If no outputs are specified then all are produced. Output files are of the form [monthly|daily]_variable.dat. Where variable denotes the three letter code above.</p>
<p>(16) Description of required monthly and or daily outputs per ft/species. The first field must contain ‘SUBPIXEL’, if a second field exists it must be ‘MONTHLY’, ‘DAILY’ or ‘ALL’. </p><pre class="fragment">YEARLY:     No monthly or daily outputs.
MONTHLY:    Monthly outputs.
DAILY:      Daily outputs.
ALL:        Monthly and daily outputs.
</pre><p>The next two fields specify the initial and final years of the required output, followed by the actual outputs required. These can be any of the following and can be given in any order.</p>
<ul>
<li>
lai: Leaf area index  </li>
<li>
rof: Run off (mm)  </li>
<li>
evt: Evapotranspiration (mm)  </li>
<li>
trn: Transpiration (mm)  </li>
<li>
npp: Net Primary Productivity (g C m-2 yr-1)  </li>
<li>
gpp: Gross Primary Productivity (g C m-2 yr-1)  </li>
<li>
srp: Soil respiration (g C m-2 yr-1)  </li>
<li>
nep: Net Ecosystem Productivity (g C m-2 yr-1)  </li>
<li>
tmp: Temperature (oC)  </li>
<li>
prc: Precipitaiton (mm)  </li>
<li>
hum: Humidity (%)  </li>
<li>
nps: NPP storage (g C m-2)  </li>
<li>
swf: Fraction of soil moisture between wilting point and field </li>
<li>
capacity (0-1)  </li>
<li>
pet: Potential evapotranspiration (mm m-2).  </li>
<li>
int: Interception (mm m-2)  </li>
<li>
bse: Bare soil evaporation (mm m-2).  </li>
<li>
ssm: Surface soil moisture (surface currently set at 5 cm) (mm m-2)  </li>
<li>
swc: Soil water content (mm m-2).  </li>
<li>
rsp: Plant respiration (g C m-2).  </li>
<li>
qdr: Direct radiation  </li>
<li>
qdf: Diffuse radiation  </li>
<li>
lfn: Leaf nitrogen (g m-2)  </li>
<li>
lfl: Leaf litter (g m-2)  </li>
<li>
cld: Percentage of cloud cover (%).  </li>
<li>
fpr: Fraction of photosynthetically active radiation (mol)  </li>
</ul>
<p>eg SUBPIXEL ALL 5 hum srp lai gpp npp</p>
<p>If no outputs are specified then all are produced. Output files are of the form [monthly|daily]_variable_tag.dat. Where tag denotes the functional type, described in (22), variable denotes the three letter code above.</p>
<p>In addition to the variables above, the following outputs are also available at the subpixel level.</p>
<p>cov: Fractional cover (0-1). bio: Biomass (g C m-2). bud: Budburst (day of year). sen: Senescence (day of year).</p>
<p>These outputs are only available as yearly values, and as such are not affected by the value in the second field. Output files are of the form variable_tag.dat.</p>
<p>NOTE The production of many output files may greatly reduce the speed of a run. If all possible files were output for a run containing 10 fts, over 500 files would be produced, these files would all be open throughout the run.</p>
<p>(17) Years where the output data describing the forest structure is required. The data is a subset of the full state and is large compared with standard output files. The data is composed of cover, biomass, number density, and height for all cover elements. The first field should contain SANPSHOTS, subsequent fields specify individual output years if they are present.</p>
<p>The data contained in the “snapshots” files can be used to produce a cartoon of the landscape of a particular site using a companion program ‘cartoon.for’. This image is to scale and covers a hectare of the landscape. The positioning of the cohorts in the cartoon is random as there is no spatial arrangement of cohorts within the SDGVM. The program utilises “PSPLOT” subroutines to produce a post-script file which can be viewed in any post-script friendly application (Coreldraw, Ghostview, Pageview), ghostscript/gsview is freely downloadable for windows and unix. The program ‘cartoon.for’ is written in fortran77 and compiles in g77 which is freely downloadable for windows and unix.</p>
<p>Compile with </p><pre class="fragment">  g77 –o cartoon cartoon.for
</pre><p>cartoon accepts 3 compulsory arguments which give the directory name of where the “snapshot” files exist and the year and site number of interest. The perspective and vertical randomisation of the cartoon may be altered using four additional arguments.</p>
<p>cartoon directory year site_number [height depth shift randomy]</p>
<p>height = The height of the cartoon. depth = The reduction of the horizontal from the foreground to the background. shift = A shift in the background. randomy = The randomness of cohorts in the vertical plane (generally this should be set to 1.0).</p>
<p>Set depth to 1.0 and shift to 0.0 for no perspective.</p>
<p>(18) Blank</p>
<p>(19) Bare ground functional type parameterisation must contain “BARE” and a mixing parameter, normally set to 1.0.</p>
<p>eg BARE 1.0</p>
<p>(20) City functional type parameterisation, must contain “CITY” and a mixing parameter, normally set to 0.0.</p>
<p>eg CITY 0.0</p>
<p>(21) Skipped.</p>
<p>(22) The functional types parameterisations. There are three methods to input these parameters. </p><pre class="fragment">a) From the input file itself.

b) From a file whose name is given in the input file.
</pre><p>c) From a file whose name is given as a command line argument. To invoke this option entry in the input file must read ‘ARGUMENT’.</p>
<p>Each record corresponds to a functional type/species until a blank line is encountered. There are currently 26 parameters (fields) used for the description. Let nft denote the number of these records if option a) is being used, otherwise, nft=1.</p>
<p>(14)Tag name used to distinguish output files. (15)Mixing parameter (0-1). (16)Photosynthetic pathway (0=C4, 1=C3). (17)Phenology: 1 for grass 2 for tree. (18)Fraction of leaves harvested (0-1). (19)Length of crop season (days) (20)Maximum age (years). (21)Wood density (). (22)Xylem conductivity (). (23)Water potential (). (24)Specific leaf area (m2/g). (25)Leaf life span (days). (26)Stem life span (days). (27)Root life span (days). (28)Leaf mortality index (0-1). (29)Leaf growth rate. (30)Bud burst memory (days). (31)Bud burst minimum threshold (C). (32)Bud burst maximum (C). (33)Bud burst limit (days). (34)Senescence memory (days). (35)Senescence sensitivity (C). (36)Senescence limit (C). (37)Maximum carbon store (g C m-2). (38)Initial minimum stem growth rate (mm). (39)Final minimum stem growth rate (mm). (40)Seeding density (no m-2).</p>
<p>eg Dc_Bl 200 0.375 5.50 2.2 1 0.015 180 360 360 0.751.0 21 5 5 60 21 15 5 600.0 0.004 0.001 0.1</p>
<p>The mixing parameter 2) describes to what extent the resources (soil water, carbon and nitrogen) are shared between cover elements within a pixel: 1.0 = all resources are shared, 0.0 = no resources are shared.</p>
<p>NOTE If specific leaf area is negative then it is computed empirically as a function of leaf life span. Bare ground is set automatically with a tag name of ‘BARE’.</p>
<p>(22+nft) Skipped.</p>
<p>(23+nft) Land use mapping. A list of records describing the land use index in terms of the ft/species. One record per index. Let nlu denote the number of these records.</p>
<p>eg 10 60 Ev_Nl 40 Dc_Bl</p>
<p>NOTE Bare ground can be set explicitly, by default any ground not assigned is mapped to bare ground.</p>
<p>(23+nft+nlu) Skipped.</p>
<p>(24+nft+nlu) Three fields: two real values followed by an integer.</p>
<p>(41)The maximum rate at which pfts  2 may take over pfts 1 and 2 grass, fraction per year.</p>
<p>(42)The maximum rate at which pfts 1 and 2 may take over bare ground, fraction per year.</p>
<p>(43)Fire control. If positive. The age at which pfts become resistant to fire. A vale larger than the maximum lifespan of the pfts will result in no fire resistance, whilst a value of zero will produce no fire. If negative. A constant fraction of the pixel to be burnt each year (0-1). This is given in 1000ths, ie. a value of -10 would burn 1% of the pixel each year.</p>
<p>(25+nft+nlu) Skipped.</p>
<p>(26+nft+nlu) Three methods of defining the sites to be simulated.</p>
<p>If the climate directory is pointing to a SITE data base</p>
<p>a) The latitude and longitude are taken from the ‘readme.dat’ file and this line is skipped, unless it contains one field in which case this is used as the number of sites. This is useful to repeatedly run the same site to examine the sensitivity to the weather generator.</p>
<p>If the climate directory is pointing to a DAILY or MONTHLY data base.</p>
<p>b) A list of sites can be specified one site per record, two fields per record: latitude and longitude. There are three methods for site input. </p><pre class="fragment">    i) Directly from the input file.

    ii) From a file whose name is given in the input file. 
    If this option is used the following line can, optionally, 
    contain a list of space delimited countries and or regions 
    as defined in the country_id.dat file in the data directory. 
    Only sites belonging to one of the countries or regions will be run. 
</pre><p>eg ../../data/sites/global_1deg.dat SPAIN U.K. USA_NJ</p>
<p>iii) From a file whose name is given as a command line argument. Three command line arguments are used in order to define both the file a section of the file: file name, line number of the initial site, line number of the final site. This option was introduced to enable simple parallelisation of the model. To invoke this option the input file should read ‘ARGUMENT’</p>
<p>In (ii) &amp; (iii) the format of the file records must be (F7.3,F9.3) as direct access is used.</p>
<p>c) A box can be defined using four fields: minimum latitude, maximum latitude, minimum longitude and maximum longitude. Optionally the resolution of the simulation can also be given for both latitude and longitude; the resolution of the climate database is used by default. An additional field in either case results in the termination of the program after the land sites have been written to the file ‘land_sites.dat’. This facility can be used to produce a list of sites which can then be used as the site file in b) iii) above.</p>
<p>(+1) Skipped.</p>
<p>(+1) Eight or nine fields specifying the soil characteristics. The values specified here overwrite those given in the soil characteristics data base or the default values if they are positive. The nine fields are sand %, silt %, bulk density (g/m3), organic carbon content (%), wilting point fraction (0-1), field capacity fraction (0-1), saturated water content fraction (0-1), depth (cm) and the depth of the top soil layer (mm). The default value for the top soil layer is 5mm, this is used if the ninth field is not present.</p>
<p>eg 50.0 30.0 1.21 0 0 0 0 100.0</p>
<p>Default values of bulk density and soil depth are currently set at 1330000.0 g/m3 and 100.0 cm respectively. Note that the wilting point, field capacity and saturated wilting point can be calculated from the Brookes Correy equations (as opposed to the soils data-base), this is invoked by using a negative number in the wilting point field.</p>
<p>(+1) Skipped.</p>
<p>(+1) Optionally the word ‘ARGUMENT’. This puts the SDGVM into parameter adjustment mode which is designed to be used for sensitivity type studies where many runs are required at one site, each using a different set of parameter values. The name of the file containing the array of parameter values (one record per run) is given as an argument in the command line followed by two integer values giving the first and last records (parameter sets) to be run.</p>
<p>eg,</p>
<p>sdgvm0 ../../output/input.dat ../../output/parameter_array.dat 3 5</p>
<p>Would run the same site 3 times using parameter values taken from the 3rd, 4th and 5th records of the parameter file.</p>
<p>Editing of the source code is likely to be needed to hook up the parameters of interest. Though, this is fairly straight forward using the existing parameter framework. A parameter of interest should be included in the ‘param’ common block which exists in the file ‘param.inc’, all values are conventionally prefixed with ‘p_’ to distinguish them in the general code. To gain access to the variables in the ‘param’ common from a subroutine, include the line</p>
<p>INCLUDE ‘param.inc’</p>
<p>in the variable type definitions; this already exists in many subroutines of the SDGVM. The parameter sets are read into the common block in the subroutine ‘PARAMETER_ADJUSTMENT’ which can be found in the file ‘parameter_adjustment.f’. This is invoked around line 1466 in the main program (found in sdgvm0.f) along with any necessary setting of variables to parameter values.</p>
<p>(+1) Skipped if ‘ARGUMENT’ was used on the previous line.</p>
<p>(+1) Switch defining land use, there are three options [0,1,2]. </p><pre class="fragment">0) Use the database defined at the start of the input file.
</pre><p>1) Use the land use defined explicitly in the input file. This is done using a list of records containing two fields: year and land</p>
<p>use index.</p>
<p>eg 1901 7 1950 9 1993 15 2) Use natural vegetation. If this facility is being used, then the six tag names ‘Ev_Bl’ ‘Ev_Nl’ ‘Dc_Bl’ ‘Dc_Nl’ ‘C3’ and ‘C4’ must exist as functional type parameterisations. They can exist in any order, and other tagnames may be present, though they will not be assigned any cover.</p>
<p>Default Output Files</p>
<p>NOTE The currency symbol $ is now used to suppress a carriage return at the end of a line. Unfortunately, this is a Fortran extension and is not available in standard Fortran. Compilers without this extension will output each data value on a separate line. A companion program ‘dosrec.f’ is supplied along with the SDGVM to put the resulting files in the desired format. The program accepts one argument which is the directory containing the SDGVM output.</p>
<p>diag.dat: File containing reports of carbon or water leakage, should always be empty. site_info.dat: Site information: latitude, longitude, land use initial year, land use final year, CO2 initial year, CO2 final year, sand %, silt %, bulk density (g/m3), field capacity (0-1), wilting point (0-1), saturated water capacity (0-1), soil depth (cm). simulation.dat: A copy of the input file which produced the run, along with a copy of the parameters from the ‘param.dat’ file. land_sites.dat: A file containing all land sites as judged by the land sea mask. init.dat: Some of the variables making up the system state. lai.dat: Leaf area index (m2 m-2). npp.dat: Net primary productivity (g m-2). scn.dat: Soil carbon in the top 1m (g m-2). snn.dat: Soil nitrogen in the top 1m (g m-2) nep.dat: Net ecosystem productivity (NPP – Soil respiration) (g m-2). swc.dat: Soil water content. The amount of water contained in the top 1m of soil (mm or kg m-2). biot.dat: The total biomass (g m-2) bioind.dat: The dominant functional type in terms of biomass (1-nft). covind.dat: The dominant functional type in terms of cover (1-nft). dof.dat: The number of days in the year where LAI was zero (0-360). rof.dat: The yearly runoff (mm or kg m-2). fcn.dat: The carbon released into the atmosphere through burning (g m-2). nppstore.dat: Stored NPP (g C m-2). stembio.dat: The biomass of roots (g m-2) rootbio.dat: The biomass of roots (g m-2) leafper.dat: The percentage of NPP utilised in the production of leaves. stemper.dat: The percentage of NPP utilised in the production of stems. rootper.dat: The percentage of NPP utilised in the production of roots. sresp.dat: Soil respiration (g m-2) evt.dat: Evapotranspiration: transpiration plus evaporation (mm yr-1) gpp.dat: Gross primary productivity. The total photosynthesis (g m-2). lch.dat: Soil carbon leaching (g m-2). prc.dat: Yearly precipitation (mm or kg m-2). nbp.dat: Net biosphere production (g C m-2 yr-1). (NPP –Soil respiration - Fire) trn: Transpiration (mm yr-1) fab: Fire area burnt, the fraction of the pixel which is burnt each year (0-1). tmp: Average yearly temperature (C). </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.8.14-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer" style="font-weight: bold;">&copy; 2018 Leverhulme Center for Climate Change Mitigation (LC3M)
      <a href="http://www.doxygen.org/index.html">
<!---        <img class="footer" src="LC3M2.png" alt="doxygen"/>
--->
      </a>
    </li>
  </ul>
</div>
</body>
</html>
